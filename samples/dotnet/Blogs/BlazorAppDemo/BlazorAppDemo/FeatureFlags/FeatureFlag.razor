@using FeatBit.Sdk.Server
@using FeatBit.Sdk.Server.Model
@inject IFbClient FeatureFlags

@if (showChildContent == true)
{
    @ChildContent
}


@code {
    [Parameter]
    public RenderFragment? ChildContent { get; set; }
    [Parameter]
    public string FlagKey { get; set; }
    [Parameter]
    public bool DefaultValue { get; set; }

    private bool showChildContent;

    protected override async Task OnInitializedAsync()
    {
        var user = FbUser.Builder("anonymous").Build();
        showChildContent = FeatureFlags.BoolVariation(FlagKey, user, defaultValue: false);

        await base.OnInitializedAsync();
    }
}
